<!DOCTYPE html>
<html>

<head>
    <title>CSC 515 HW1</title>
    <style type="text/css">
        #Heading {
            text-align: center;
            color: red;
            font-size: 20px;
            font-weight: bold;
            text-decoration: underline;
        }

        label {
            display: inline-block;
            margin-bottom: 10px;
        }

        input {
            display: inline-block;
            margin-bottom: 5px;
            padding: 12px 20px;
        }

        select {
            margin-bottom: 10px;
        }

        #fname {
            width: 70%;
        }

        #lname {
            width: 70%;
        }

        #email {
            width: 70%;
        }

        #mobile {
            width: 70%;
        }

        #city {
            width: 70%;
        }

        #state {
            width: 70%;
        }

        #pword {
            width: 70%;
        }

        #submit {
            padding: 2px !important;
        }

        #gender {
            border: none;
            margin-bottom: 0px;
        }

        .div {
            margin-bottom: 5px;
        }
    </style>
</head>

<body>
    <p id="Heading">Registration Form</p>

    <!-- To open in xampp, type localhost/Form.html into browser -->
    <form action="sub_page.php" method="post">
        <label for="fname">First Name:</label>
        <br>
        <input type="text" id="fname" name="fname" placeholder="Enter your first name">
        <div id="resultFName"></div>
        <label for="lname">Last Name:</label>
        <br>
        <input type="text" id="lname" name="lname" placeholder="Enter your last name">
        <div id="resultLName"></div>
        <label for="email">Email:</label>
        <br>
        <input type="text" id="email" name="email" placeholder="Enter your Email">
        <div id="resultEmail"></div>
        <label for="mobile">Mobile:</label>
        <br>
        <input type="tel" id="mobile" name="mobile" minLength="9" maxlength="10">
        <div id="resultMobile"></div>
        <label for="gender">Gender:</label>
        <br>
        <fieldset id="gender">
            <input type="radio" id="male" value="male" name="gender">Male
            <input type="radio" id="female" value="female" name="gender">Female
        </fieldset>
        <div id="resultGender"></div>
        <label for="city">City:</label>
        <br>
        <input type="text" id="city" name="city">
        <div id="resultCity"></div>
        <label for="state">State:</label>
        <br>
        <input type="text" id="state" name="state">
        <div id="resultState"></div>
        <label for="qualif">Qualification:</label>
        <br>
        <select id="qualif" name="qualif">
            <option value="select" disabled selected>Select Qualification:</option>
            <option value="graduation">Graduation</option>
            <option value="BTech">BTech</option>
            <option value="MTech">MTech</option>
            <option value="mca">MCA</option>
            <option value="bca">BCA</option>
        </select>
        <div id="resultQual"></div>
        <label for="pword">Password:</label>
        <br>
        <input type="password" id="pword" name="pword">
        <div id="resultPass"></div>
        <input type="submit" value="Submit" id="submitInput" onclick="return Validate();">
    </form>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script type="text/javascript">
        //add $(document).ready(function(){} to this code

        function Validate() {
            //variable declarations
            var first = document.getElementById('fname').value;
            var last = document.getElementById('lname').value;
            var mail = document.getElementById('email').value;
            var number = document.getElementById('mobile').value;
            var gender;
            var qualification;
            var location = document.getElementById('city').value;
            var state = document.getElementById('state').value;
            var pass = document.getElementById('pword').value;
            var errorCount = 0;

            //validation
            if (!/^[a-zA-Z'\s]{1,30}$/.test(first)) {
                document.getElementById('resultFName').innerText = "";
                document.getElementById('resultFName').innerHTML += "<p style='color:red'>Error</p>";
                errorCount++;
            }
            else {
                document.getElementById('resultFName').innerText = "";
                document.getElementById('resultFName').innerHTML += "<p style='color:green'>Correct</p>";
            }

            if (!/^[a-zA-Z'\s]{1,30}$/.test(last)) {
                document.getElementById('resultLName').innerText = "";
                document.getElementById('resultLName').innerHTML += "<p style='color:red'>Error</p>";
                errorCount++;
            }
            else {
                document.getElementById('resultLName').innerText = "";
                document.getElementById('resultLName').innerHTML += "<p style='color:green'>Correct</p>";
            }

            //need to limit to two domains
            if (!/^(?!.{41})[a-z0-9]+(?:\.[a-z0-9]+)*@[a-z0-9-]+(?:\.[a-z0-9-]+)*\.[a-zA-Z]{2,6}$/.test(mail)) {
                document.getElementById('resultEmail').innerText = "";
                document.getElementById('resultEmail').innerHTML += "<p style='color:red'>Error</p>";
                errorCount++;
            }
            else {
                document.getElementById('resultEmail').innerText = "";
                document.getElementById('resultEmail').innerHTML += "<p style='color:green'>Correct</p>";
            }

            //Utilized to prevent letters from being inserted into mobile
            if (!/^(?=.*\d)/.test(number)) {
                document.getElementById('resultMobile').innerText = "";
                document.getElementById('resultMobile').innerHTML += "<p style='color:red'>Error</p>";
                errorCount++;
            }
            else {
                document.getElementById('resultMobile').innerText = "";
                document.getElementById('resultMobile').innerHTML += "<p style='color:green'>Correct</p>";
            }

            if (!document.getElementById('male').checked) {
                if (!document.getElementById('female').checked) {
                    document.getElementById('resultGender').innerText = "";
                    document.getElementById('resultGender').innerHTML += "<p style='color:red'>Error</p>";
                    errorCount++;
                }
            }
            else {
                gender = "Male";
                document.getElementById('resultGender').innerText = "";
                document.getElementById('resultGender').innerHTML += "<p style='color:green'>Correct</p>";
            }

            if (document.getElementById('female').checked) {
                gender = "Female";
                document.getElementById('resultGender').innerText = "";
                document.getElementById('resultGender').innerHTML += "<p style='color:green'>Correct</p>";
            }

            //Preventing numbers from being input
            if (!/^[a-zA-Z]/.test(location)) {
                document.getElementById('resultCity').innerText = "";
                document.getElementById('resultCity').innerHTML += "<p style='color:red'>Error</p>";
                errorCount++;
            }
            else {
                document.getElementById('resultCity').innerText = "";
                document.getElementById('resultCity').innerHTML += "<p style='color:green'>Correct</p>";
            }

            //Preventing numbers from being input
            if (!/^[a-zA-Z]/.test(state)) {
                document.getElementById('resultState').innerText = "";
                document.getElementById('resultState').innerHTML += "<p style='color:red'>Error</p>";
                errorCount++;
            }
            else {
                document.getElementById('resultState').innerText = "";
                document.getElementById('resultState').innerHTML += "<p style='color:green'>Correct</p>";
            }

            if (document.getElementById('qualif').selectedIndex == 0) {
                document.getElementById('resultQual').innerText = "";
                document.getElementById('resultQual').innerHTML += "<p style='color:red'>Error</p>";
                errorCount++;
            }
            else {
                qualification = document.getElementById('qualif').value
                document.getElementById('resultQual').innerText = "";
                document.getElementById('resultQual').innerHTML += "<p style='color:green'>Correct</p>";
            }

            if (!/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]){3,10}/.test(pass)) {
                document.getElementById('resultPass').innerText = "";
                document.getElementById('resultPass').innerHTML += "<p style='color:red'>Error</p>";
                errorCount++;
            }
            else {
                document.getElementById('resultPass').innerText = "";
                document.getElementById('resultPass').innerHTML += "<p style='color:green'>Correct</p>";
            }

            if (errorCount != 0) {
                console.log(errorCount);
                return false;
            }
            else {
                console.log("starting...")
                $.ajax({
                    type: 'post',
                    url: "localhost/sub_page.php",
                    data: {
                        firstname: first,
                        lastname: last,
                        email: mail,
                        mobile: number,
                        gender: gender,
                        city: location,
                        state: state,
                        qualification: qualification,
                        password: pass

                    },
                    cache: false,
                    success: function (data) {
                        alert(data);
                    },
                    error: function (xhr, status, error) {
                        console.error(xhr);
                    }
                });
            }
        }

    </script>
</body>

</html>